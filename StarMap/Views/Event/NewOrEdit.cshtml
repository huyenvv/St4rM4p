@model StarMap.Models.EventModel
@using Resources
@using StarMap.Models
@using StarMap.Utilities
@{
    ViewBag.Title = (Model.Id != 0 ? Resources.Edit : Resources.Create) + " " + Resources.Event.ToLower();
    var listCate = (List<StarMap.Models.Category>)ViewBag.Category;
    var lang = StarMap.Helpers.CultureHelper.GetCurrentCulture(true);
}

<link href="~/Content/FileInput.css" rel="stylesheet" />
<link href="/Content/bootstrap-datetimepicker.css" rel="stylesheet" />
<div class="col-md-3">
    @Html.Partial("_AdminMenu")
</div>
<div class="col-md-9">
    <h3 class="page-header">@ViewBag.Title</h3>

    @using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true)
        @Html.HiddenFor(model => model.Id)
        <div class="form-group">
            <label for="Name">@Resources.Name</label>
            @Html.TextBoxFor(model => model.Name, new { Class = "form-control" })
            @Html.ValidationMessageFor(model => model.Name)
        </div>
        <div class="row">
            <div class="col-sm-6">
                <label for="Location">@Resources.Location</label>
                @Html.TextBoxFor(model => model.Location, new { Class = "form-control" })
                @Html.ValidationMessageFor(model => model.Location)
            </div>
            <div class="col-sm-6">
                <label for="CategoryId">@Resources.Category</label>
                <select name="CategoryId" class="form-control">
                    @foreach (var item in listCate)
                    {
                        <option value="@item.Id" @(Model.CategoryId == item.Id ? "Selected" : "")>@item.Name</option>
                    }
                </select>
                @Html.ValidationMessageFor(model => model.CategoryId)
            </div>
        </div>
        <br />
        <div class="form-group">
            <label for="Address">@Resources.Address</label>
            @Html.TextBoxFor(model => model.Address, new { Class = "form-control" })
            @Html.ValidationMessageFor(model => model.Address)
        </div>
        <div class="row">
            <div class="col-sm-6">
                <label for="PublicDate">@Resources.EventDate</label>
                <input type="text" name="PublicDate" value="@Common.GetLocaleDateTime(Model.PublicDate, lang)" class="typeDate form-control" />
            </div>
            <div class="col-sm-6">
                <label for="Mobile">@Resources.Mobile</label>
                @Html.TextBoxFor(model => model.Mobile, new { Class = "form-control" })
                @Html.ValidationMessageFor(model => model.Mobile)
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col-sm-6">
                <label for="ThumbImage">@Resources.ThumbImage</label>
                <div class="form-group">
                    @Html.Partial("_ShowImage", new ImageModel
                    {
                        ImagePath = Model.ThumbImage,
                        ImageName = "thumbImagePathFile"
                    })
                </div>
                @Html.ValidationMessageFor(model => model.ThumbImage)
            </div>
            <div class="col-sm-6">
                <label for="DetailImage">@Resources.DetailImage</label>
                <div class="form-group">
                    @Html.Partial("_ShowImage", new ImageModel
                    {
                        ImagePath = Model.DetailImage,
                        ImageName = "detailImagePathFile"
                    })
                </div>
                @Html.ValidationMessageFor(model => model.DetailImage)
            </div>
        </div>
        <div class="form-group">
            <label for="ThumbDescription">@Resources.ThumbDescription</label>
            @Html.TextAreaFor(model => model.ThumbDescription, new { Class = "form-control", rows = "3" })
            @Html.ValidationMessageFor(model => model.ThumbDescription)
        </div>
        <div class="form-group">
            <label for="DetailDescription">@Resources.DetailDescription</label>
            @Html.TextAreaFor(model => model.DetailDescription, new { Class = "form-control", rows = "9" })
            @Html.ValidationMessageFor(model => model.DetailDescription)
        </div>
        <div class="clearfix"></div>
        <div class="form-group">
            <input type="submit" value="@Resources.Save" class="btn btn-primary" />
            @Html.ActionLink(Resources.Back, "Index", null, new { Class = "btn btn-default" })
        </div>
    }

    @section Scripts {
        @Scripts.Render("~/bundles/jqueryval")
        <script src="~/Scripts/fileInput.js"></script>
        <script src="~/Scripts/moment-with-locales.js"></script>
        <script src="~/Scripts/bootstrap-datetimepicker.js"></script>
        <script>
            $(document).ready(function () {
                $('.typeDate').datetimepicker({
                    @*format: '@formatDate',
                    widgetPositioning: { vertical: 'bottom' }*@
                    locale: '@lang'
                });
            });
        </script>
        @Html.Partial("_CheckFileImageExtension")
    }
</div>